<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <title><%= current_page.data.title || 'Application' %></title>

    <!-- Base styles -->
    <%= stylesheet_link_tag "base", :media => 'all' %>

    <!-- Page specific styles -->
    <%= stylesheet_link_current "main", :media => 'all' %>

    <%= yield_content :head %>
  </head>
  <body>
    <div class="app-container">
      <%= render_partial :navbar %>
      <div class="app-content">
        <%= yield %>
      </div>
      <div class="app-footer-push"></div>
    </div>
    <div class="app-footer">
      <%= render_partial :credits %>
    </div>
    
    <!-- Base scripts -->
    <%= javascript_include_tag "base" %>

    <!-- Page specific scripts -->
    <%= javascript_include_current "main" %>

    <!-- Analytics -->
    <script type="text/javascript">
    if (window.App.config.googleAnalyticsAccount) {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', window.App.config.googleAnalyticsAccount]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    }
    </script>
    

    <!-- Javascript Templates -->
    <%= render_templates_current %>
  </body>
</html>
